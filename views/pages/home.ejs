<style>
    .login-success {
        margin: 20px;
        text-align: center;
        color: rgb(0, 175, 0);
        border: 1px solid rgb(0, 175, 0);
        padding: 1rem;
        border-radius: 4px;
    }

    .logout-success {
        margin: 20px;
        text-align: center;
        color: rgb(175, 0, 0);
        border: 1px solid rgb(175, 0, 0);
        padding: 1rem;
        border-radius: 4px;
    }
</style>

<% if (registered) { %>
    <h1 class="login-success">Connexion avec succès</h1>
    <script>
        // Supprime le params de l'URL après la redirection
        document.addEventListener("DOMContentLoaded", () => {
            // Vérifie si le paramètre "registered" est présent dans l'URL
            const urlParams = new URLSearchParams(window.location.search);
            if (urlParams.has('registered')) {
                // Supprime le paramètre de l'URL sans recharger la page
                const newUrl = window.location.origin + window.location.pathname;
                window.history.replaceState({}, document.title, newUrl);
            }
        });
    </script>
    <% } %>

        <% if (disconnected) { %>
            <h1 class="logout-success">Déconnexion avec succès</h1>
            <script>
                // Supprime le params de l'URL après la redirection
                document.addEventListener("DOMContentLoaded", () => {
                    // Vérifie si le paramètre "registered" est présent dans l'URL
                    const urlParams = new URLSearchParams(window.location.search);
                    if (urlParams.has('disconnected')) {
                        // Supprime le paramètre de l'URL sans recharger la page
                        const newUrl = window.location.origin + window.location.pathname;
                        window.history.replaceState({}, document.title, newUrl);
                    }
                });
            </script>
            <% } %>

                <div class="slider">
                    <div class="slider-container">
                        <img src="/images/home/slide1.png" alt="Image du lycée 1" class="slide active" />
                        <img src="/images/home/slide2.png" alt="Image du lycée 2" class="slide" />
                        <img src="/images/home/slide3.png" alt="Image du lycée 3" class="slide" />
                    </div>
                    <div class="slider-nav">
                        <button class="slider-dot active" data-index="0"></button>
                        <button class="slider-dot" data-index="1"></button>
                        <button class="slider-dot" data-index="2"></button>
                    </div>
                </div>

                <div class="welcome-section">
                    <h1>Boutique en ligne du lycée Henri Wallon</h1>
                    <p>Retrouvez tous nos goodies !</p>
                </div>

                <div class="best-sellers">
                    <h2>Nos best sellers</h2>
                    <div class="products">
                        <div class="product">
                            <img src="/images/home/product2.png" alt="T-shirt blanc" />
                            <div class="product-info">
                                <h3>T-shirt blanc</h3>
                                <p>15.99€</p>
                            </div>
                        </div>
                        <div class="product">
                            <img src="/images/home/product1.png" alt="Mug du lycée" />
                            <div class="product-info">
                                <h3>Mug du lycée</h3>
                                <p>9.99€</p>
                            </div>
                        </div>
                        <div class="product">
                            <img src="/images/home/product3.png" alt="Sweatshirt noir" />
                            <div class="product-info">
                                <h3>Sweatshirt noir</h3>
                                <p>29.99€</p>
                            </div>
                        </div>
                    </div>
                </div>

                <script>
                    document.addEventListener("DOMContentLoaded", () => {
                        const slides = document.querySelectorAll(".slide");
                        const dots = document.querySelectorAll(".slider-dot");
                        let currentSlide = 0;

                        function showSlide(index) {
                            slides.forEach((slide) => slide.classList.remove("active"));
                            dots.forEach((dot) => dot.classList.remove("active"));

                            slides[index].classList.add("active");
                            dots[index].classList.add("active");
                            currentSlide = index;
                        }

                        dots.forEach((dot, index) => {
                            dot.addEventListener("click", () => showSlide(index));
                        });

                        setInterval(() => {
                            let nextSlide = (currentSlide + 1) % slides.length;
                            showSlide(nextSlide);
                        }, 5000);

                        const burgerMenu = document.querySelector(".burger-menu");
                        const navLinks = document.querySelectorAll(".nav-links");
                        const overlay = document.querySelector(".menu-overlay");

                        burgerMenu.addEventListener("click", () => {
                            navLinks.forEach((nav) => nav.classList.toggle("active"));
                            overlay.classList.toggle("active");

                            const icon = burgerMenu.querySelector("ion-icon");
                            const isOpen = icon.getAttribute("name") === "menu-outline";
                            icon.setAttribute("name", isOpen ? "close-outline" : "menu-outline");
                        });

                        overlay.addEventListener("click", () => {
                            navLinks.forEach((nav) => nav.classList.remove("active"));
                            overlay.classList.remove("active");

                            const icon = burgerMenu.querySelector("ion-icon");
                            icon.setAttribute("name", "menu-outline");
                        });
                    });

                </script>